<html>
<title>Random Scratch Projects!</title>
<h1>Random Scratch Project</h1>
<h2>View a random project on Scratch!</h2>
<script src="https://cdn.rawgit.com/colt05/improved-octo-robot/00f5423bc26d68fc6976b701e2415212aeb79088/scratchstats.js"></script>
<script src="//cdn.rawgit.com/colt05/get-request/master/latest3.js"></script>
<script>
  importGet();
  function randomProject() {
  try{
  var url = "http://random.org/integers/?num=1&min=1&max=".concat(getProjectCount() * 2).concat("&col=1&base=10&format=plain&rnd=new");
  var response = "123456";
  var parsed = null;
  //var xmlHttp = new XMLHttpRequest();
  //xmlHttp.open( "GET", url, false );
  //xmlHttp.send( null );
  response = proxyget(url, "Random-Scratch-Project");
  var jsonParsed = getProjectJSON(response);
  if (jsonParsed != false) {
  document.getElementById("details").innerHTML = "Project title: ".concat(jsonParsed.title).concat(" \nCreator name: ").concat(jsonParsed.creator.username);
  document.getElementById("link").href = "https://scratch.mit.edu/projects/".concat(response).concat("/");
  document.getElementById("link").innerHTML = "Click";
  } else {
    response = response + 1;
    jsonParsed = getProjectJSON(response);
    if (jsonParsed != false) {
    document.getElementById("details").innerHTML = "Project title: ".concat(jsonParsed.title).concat(" \nCreator name: ").concat(jsonParsed.creator.username);
    document.getElementById("link").href = "https://scratch.mit.edu/projects/".concat(response).concat("/");
    document.getElementById("link").innerHTML = "Click";
    } else {
      var r = confirm("The random project IDs did not lead to a project. Keep trying?");
      if (r == true) {
        while (jsonParsed == false) {
          url = "http://crossorigin.me/http://random.org/integers/?num=1&min=1&max=".concat(getProjectCount()).concat("&col=1&base=10&format=plain&rnd=new");
          response = "123456";
          parsed = null;
          xmlHttp = new XMLHttpRequest();
          xmlHttp.open( "GET", url, false );
          xmlHttp.send( null );
          response = xmlHttp.responseText;
          jsonParsed = getProjectJSON(response);
        }
          document.getElementById("details").innerHTML = "Project title: ".concat(jsonParsed.title).concat(" \nCreator name: ").concat(jsonParsed.creator.username);
          document.getElementById("link").href = "https://scratch.mit.edu/projects/".concat(response).concat("/");
          document.getElementById("link").innerHTML = "Click";
      } else {
        // do nothing
      }
    }
  }
  }
  catch(err) {
  alert("Error!");
  }
  }
</script>
<button onclick="randomProject()">Start</button>
<a id="link" href="http://colt05.github.io/"></a>
<p id="details"></p>
<h2>Bookmarklet</h2>
<p><a href="javascript:(function()%7Bfunction%20callback()%7Bvar%20url%20%3D%20randomProjectURL()%3Bwindow.location.assign(randomProjectURL())%7Dvar%20s%3Ddocument.createElement(%22script%22)%3Bs.src%3D%22https%3A%2F%2Fcdn.rawgit.com%2Fcolt05%2FRandom-Scratch-Project%2F0cd729c21c3efcf515d32f4f24ba0289b0a02141%2Fapi.js%22%3Bif(s.addEventListener)%7Bs.addEventListener(%22load%22%2Ccallback%2Cfalse)%7Delse%20if(s.readyState)%7Bs.onreadystatechange%3Dcallback%7Ddocument.body.appendChild(s)%3B%7D)()">Random Scratch Project</a></p>
<p>Bookmarklet maker link: <a href="http://mrcoles.com/bookmarklet/">here</a>
<h3>WARNING: When using the bookmarklet, the page may freeze. If the page freezes, the bookmarklet is trying to find a Scratch project.</h3>
</html>
