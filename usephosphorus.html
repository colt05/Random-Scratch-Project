<html>
<title>Random Scratch Projects!</title>
<h1>Random Scratch Project</h1>
<h2>View a random project on Scratch!</h2>
<script src="https://cdn.rawgit.com/colt05/improved-octo-robot/00f5423bc26d68fc6976b701e2415212aeb79088/scratchstats.js"></script>
<script>
function w(id) {
  document.getElementById("iframe").src = "http://phosphorus.github.io/app.html?id=".concat(id).concat("&turbo=false&full-screen=false");
}
  function randomProject() {
  try{
  var url = "http://crossorigin.me/http://random.org/integers/?num=1&min=1&max=".concat(getProjectCount()).concat("&col=1&base=10&format=plain&rnd=new");
  var response = "123456";
  var parsed = null;
  var xmlHttp = new XMLHttpRequest();
  xmlHttp.open( "GET", url, false );
  xmlHttp.send( null );
  response = xmlHttp.responseText;
  var jsonParsed = getProjectJSON(response);
  if (jsonParsed != false) {
  document.getElementById("details").innerHTML = "Project title: ".concat(jsonParsed.title).concat(" \nCreator name: ").concat(jsonParsed.creator.username);
  document.getElementById("link").href = "https://scratch.mit.edu/projects/".concat(response).concat("/");
  document.getElementById("link").innerHTML = "Click";
  w(response)
  } else {
    response = response + 1;
    jsonParsed = getProjectJSON(response);
    if (jsonParsed != false) {
    document.getElementById("details").innerHTML = "Project title: ".concat(jsonParsed.title).concat(" \nCreator name: ").concat(jsonParsed.creator.username);
    document.getElementById("link").href = "https://scratch.mit.edu/projects/".concat(response).concat("/");
    document.getElementById("link").innerHTML = "Click";
    w(response)
    } else {
      var r = confirm("The random project IDs did not lead to a project. Keep trying?");
      if (r == true) {
        while (jsonParsed == false) {
          url = "http://crossorigin.me/http://random.org/integers/?num=1&min=1&max=".concat(getProjectCount()).concat("&col=1&base=10&format=plain&rnd=new");
          response = "123456";
          parsed = null;
          xmlHttp = new XMLHttpRequest();
          xmlHttp.open( "GET", url, false );
          xmlHttp.send( null );
          response = xmlHttp.responseText;
          jsonParsed = getProjectJSON(response);
        }
          document.getElementById("details").innerHTML = "Project title: ".concat(jsonParsed.title).concat(" \nCreator name: ").concat(jsonParsed.creator.username);
          document.getElementById("link").href = "https://scratch.mit.edu/projects/".concat(response).concat("/");
          document.getElementById("link").innerHTML = "Click";
          w(response)
      } else {
        // do nothing
      }
    }
  }
  }
  catch(err) {
  alert("Error!");
  }
  }
</script>
<button onclick="randomProject()">Start</button>
<a id="link" href="http://colt05.github.io/"></a>
<p id="details"></p>
<iframe id="iframe" src="http://colt05.github.io/"></iframe>
</html>
